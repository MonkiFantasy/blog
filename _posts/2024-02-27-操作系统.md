```yaml
title: 操作系统一轮复习
type: article
tags: 考研 操作系统 一轮
```

# 操作系统

##  操作系统四大特征

**并发** ：区别于并行，并发微观上不是同时发生
**共享**：多个进程对资源的共享 分为互斥共享和 同时共享
**虚拟**：虚拟内存技术 把比内存大的程序加载到内存中（虚拟存储器 空分复用技术）
虚拟处理器 把多个程序加载到单核cpu （时分复用技术）
**异步**：操作系统调度的顺序不同，所用的时间也不同

- 没有并发和共享，就没有虚拟和异步

## 操作系统发展历程

**手工操作阶段** 纸袋机 人机速度矛盾资源利用率低
**批处理阶段—— 单道批处理系统** 磁带机 解决了人机速度矛盾，但同时还是只有一个程序能执行，io时cpu仍然在等待
**批处理阶段——多道批处理** 并发的运行 cpu计算的同时进行另一个程序io 资源利用率得到更大提升 但是仍不能实现人机交互（程序不能改参数，调试等）
**分时操作系统** 解决了人机交互问题，以时间片轮流为各个用户服务各用户对计算机操作相互独立 但仍不能优先处理紧急任务
**实时操作系统** 能优先相应紧急任务 及时性 可靠性
分为

- 硬实时（必须严格的在规定时间内完成）
- 软实时（能接受偶尔违反时间规定）

## 区分指令（处理器能识别的最小命令）和命令
cpu 划分为内核态（可以执行特权指令） 和 用户态（只能执行非特权指令）存在程序状态字寄存器PSW中
用户态执行特权指令会触发中断信号 转换到内核态

## 中断的作用 

- 中断是让操作系统夺回cpu使用权的唯一途径
- 如果没有中断，cpu会一直执行一个应用程序

## 中断的分类 

**内中断** （也称异常、例外）
与当时执行指令有关，信号来源于cpu内部 

- 陷阱、陷入（trap）——非特权指令
- 故障(fault)
- 终止(abort)

当时执行指令非法或使用系统调用（使用trap陷入指令）
**外中断**（也称“中断”——狭义的中断）
与当前执行指令无关，信号来源于cpu外部

- 时钟中断（中断机制下并发执行）
- I/O中断

## 中断机制的基本原理

- 检查中断信号
- 找到对应的中断处理程序

## 什么是系统调用

操作系统向应用程序提供的接口，向上提供系统调用，使上层程序能够请求内核的服务

系统调用和库函数的区别？

为什么系统调用是必须的？

什么功能要用到系统调用？ 与共享资源有关的操作

## 操作系统体系结构

**大内核** 与管理相关的功能模块被划分在内核态

性能高，难以维护

**微内核** 与管理相关的功能模块被划分在用户态

微内核需要频繁地进行用户态和核心态切换，性能低

容易维护

**分层结构** 把内核分层，最底层是硬件，最高层是用户接口，每层可调用更低一层 

便于调试验证，分层验证，易于扩充和维护

缺点：仅可调用相邻层，难以合理定义各层边界

不能跨层调用，系统调用执行时间长，效率低

**模块化** 将内核划分为多个模块，各模块直接相互协作

内核 = 主模块 + 可加载内核模块

优点：

1. 模块间逻辑清晰，易于维护，确定模块间接口后可多模块同时开发
2. 可以动态加载新的模块
3. 任何模块都能直接调用其它模块，无需采用消息传递进行通信，效率高

缺点：

1. 模块间的接口未必合理实用
2. 模块间相互依赖，更难调试和验证

**外核（Exokernel）**

？

## 操作系统引导

开机时，怎么让操作系统运行起来

## 虚拟机

使用虚拟化技术，将一台物理机虚拟化为多台虚拟机器

VMM（Virtual Machine Monitor)

第一类VMM:直接运行在硬件上

第二类VMM:运行在宿主操作系统上

## 进程

动态的，程序的一次执行过程

进程的组成——**PCB（Process Control Block）、程序段、数据段**

PCB包括：

PCB是进程存在的唯一标准，当进程被创建时，操作系统为其创建PCB,当进程结束时，会回收该PCB

程序段包括程序的代码

数据段包含运行过程中产生的各种数据，如程序中定义的变量

- PCB是给操作系统用的
- 程序段数据段是给程序自己用的

程序是如何运行的？

进程实体（进程映像）

进程是进程实体的运动状态，是系统进行资源分配和调度的独立单位

**进程的特征**

- 动态性
- 并发性
- 独立性
- 异步性
- 结构型

## 进程的状态和转换

**创建态**：操作系统为进程分配资源、初始化PCB

**就绪态**：进程创建完成，尚未分配cpu资源

**运行态：**内存中存在多个就绪态的进程，cpu空闲时，操作系统就会选择一个就绪进程，让它上处理机运行

